---
sidebar_position: 6
---

# IPtables. Configure

![Linux](https://img.shields.io/badge/Linux-FCC624?style=for-the-badge&logo=linux&logoColor=black)

## Управление правилами iptables в Linux

Для разрешения входящего соединения по протоколу TCP на порт 22 (SSH) от конкретного IP-адреса 192.168.0.153 воспользуйтесь следующей командой:

```bash
iptables -A INPUT -p tcp -s 192.168.0.153 --dport 22 -j ACCEPT
```

Здесь `-A INPUT` означает добавление правила в цепочку INPUT, `-p tcp` указывает на протокол TCP, `-s 192.168.0.153` ограничивает доступ только для IP-адреса 192.168.0.153, `--dport 22` указывает на номер порта 22 (SSH), а `-j ACCEPT` указывает на принятие пакета.

Однако, все остальные IP-адреса также смогут подключаться, поскольку политика по умолчанию установлена на ACCEPT. Следовательно, вы можете либо изменить политику на DROP (все, что не разрешено, запрещено), а затем добавить правило разрешения, либо добавить правило для отбрасывания пакетов от всех других IP-адресов.

Для примера, добавим правило для отбрасывания пакетов на порт 22 от всех других IP-адресов:

```bash
iptables -A INPUT -p tcp --dport 22 -j DROP
```

Здесь `-A INPUT` означает добавление правила в цепочку INPUT, `-p tcp` указывает на протокол TCP, а `--dport 22` указывает на номер порта 22 (SSH), а `-j DROP` указывает на отбрасывание пакета.

Важно помнить, что правила iptables выполняются сверху вниз (или слева направо), поэтому правило для отбрасывания пакетов должно быть добавлено в конец цепочки, после правила разрешения.

Чтобы проверить список правил iptables, используйте команду:

```bash
iptables -L
```
:::tip
Здесь вы увидите список всех цепочек и правил с действиями, протоколами и IP-адресами.
:::