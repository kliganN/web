---
sidebar_position: 8
---

# Диагностика сети

:::tip
Все утилиты используются в реальной работе и траблшутинг является неотъемлемым навыком любого администратора, будто Linux или Windows.
:::

## Просмотр информации о сетевых интерфейсах

Чтобы посмотреть информацию о сетевых интерфейсах, можно выполнить одну из следующих команд:

```bash
ip link
```

```bash
ip a
```

```bash
ifconfig
```

## Просмотр информации о настоящем имени интерфейса

Чтобы посмотреть настоящее имя сетевого интерфейса, если оно было изменено, можно выполнить команду:

```bash
dmesg | grep -i eth
```

## Просмотр информации о маршрутах

Чтобы посмотреть информацию о маршрутах, можно выполнить одну из следующих команд:

```bash
ip route
```

```bash
ip r
```

```bash
route
```

## Диагностика доступности

### Ping

Чтобы проверить доступность хоста, можно выполнить команду:

```bash
ping -s 65000 ya.ru
```

Здесь:

- `s` — это опция, которая выбирает величину пакета.
- `ya.ru` — это адрес хоста, который мы хотим проверить.

### ARP

Если хост не пингуется, потому что заблокирован пинг ICMP пакетов, можно выполнить команду:

```bash
arp -vn
```

Здесь мы можем увидеть MAC-адреса хостов в нашей сети.

### Traceroute

Чтобы посмотреть, как пакет передается до заданного узла, можно выполнить команду:

```bash
traceroute -I -n ya.ru
```

Здесь:

- `I` — это опция, которая использует протокол ICMP для тестирования доступности хоста.
- `n` — это опция, которая отключает разрешение DNS-имен на IP-адреса.

### MTR

Чтобы посмотреть, как пакет передается до заданного узла в режиме реального времени, можно выполнить команду:

```bash
mtr ya.ru
```

## Диагностика DNS

Чтобы проверить работу DNS, можно выполнить одну из следующих команд:

```bash
host -v ya.ru
```

```bash
nslookup ya.ru
```

```bash
dig ya.ru
```

## Просмотр информации о DNS-сервере

Чтобы посмотреть информацию о DNS-сервере, можно выполнить команду:

```bash
cat /etc/resolv.conf
```

## Просмотр DNS-сервера для сетевого интерфейса

Чтобы посмотреть DNS-сервер для определенного сетевого интерфейса, можно выполнить команду:

```bash
nmcli connection show ens33 | grep dns
```

Здесь:

- `ens33` — это имя сетевого интерфейса.